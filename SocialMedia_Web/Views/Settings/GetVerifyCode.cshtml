@{
    ViewData["Title"] = "GetVerifyCode";
    Layout = "~/Views/Shared/_HomeLayout.cshtml";
}

<div class="col-10 d-flex flex-wrap gap-3 justify-content-center  p-1">
    <div class="row col-12">
        <ul class="w-auto mx-auto border-1 rounded-2 shadow p-5">
            <li>Lütfen E-posta hesabınızı kontrol edin !</li>
            <li>E-posta adresinize gönderilen 12 haneli doğrulama kodunu yazın !</li>
            <li>Kodu doğru girmeniz halinde şifre güncelleme sayfasına yönlendirileceksizin.</li>
            <li>Gönderilen kodun süresi 3 dakikadır.</li>
            <li style="list-style-type:none;text-align:center;font-size:2rem;" class="pt-5"><span id="countdown">00 : 00 : 00 : 0000</span></li>
        </ul>

    </div>

    <div id="codeInput" class=" col-9 border-1 rounded-2 shadow">
        <form class="">
            <div class="form-group d-flex justify-content-center p-5">
            <label class="d-flex">Kodu Giriniz :
                    <input type="text" class="form-control w-50 ms-3" />
                </label>
            </div>
            <div class="form-group d-flex justify-content-center">
            <button type="submit" class="btn btn-primary w-25 mb-2">Gönder</button>
            </div>
        </form>
    </div>



</div>
@section scripts{
    <script>
        // Geri sayım süresi (3 dakika)
        var countdownTime = 3 * 60 * 1000; // 3 dakika * 60 saniye * 1000 milisaniye

        // Geri sayımın başlama zamanı
        var startTime = Date.now();

        // Geri sayımı güncelleme fonksiyonu
        function updateCountdown() {
            // Şu anki zamanı al
            var currentTime = Date.now();

            // Kalan zamanı hesapla
            var remainingTime = countdownTime - (currentTime - startTime);

            // Zamanı dakika ve saniyeye dönüştür
            var minutes = Math.floor(remainingTime / (1000 * 60));
            var seconds = Math.floor((remainingTime % (1000 * 60)) / 1000);

            // Geri sayaç elementini güncelle
            document.getElementById("countdown").innerHTML = minutes + " dakika " + seconds + " saniye";

            // Geri sayım tamamlandıysa
            if (remainingTime <= 0) {
                clearInterval(countdownInterval); // Geri sayımı durdur
                document.getElementById("countdown").innerHTML = "Süre doldu!";
                document.getElementById("codeInput").style.display = "flex";
                document.getElementById("codeInput").style.justifyContent = "center";
                document.getElementById("codeInput").style.padding = "10px";
                document.getElementById("codeInput").innerHTML="<a href='#' class='btn btn-outline-primary'>Kodu Tekrar Gönder</>"
            }
        }

        // İlk güncelleme
        updateCountdown();

        // Her saniyede bir geri sayımı güncelle
        var countdownInterval = setInterval(updateCountdown, 1000);
    </script>

}

